# 重排序

## 数据依赖性
当两个操作访问同一个变量，其中一个操作为写，分为三种情况，写后读，写后写，读后写，这三种情况只要重排序两个操作的顺序，结果就会改变。

编译器和处理器不会重排序有数据依赖性的两个操作的执行顺序（仅指单个处理器/单个线程执行的操作，不同处理器之间/不同线程之间的数据依赖性不被编译器和处理器考虑）。

## as-if-serial
不论怎么重排序，程序执行的结果不能被改变（有数据依赖性的操作不会被重排序，没有的则会）。

as-if-serial语义使的单线程无需考虑重排序的干扰，也无需考虑内存可见性

**重排序可能会对多线程程序的执行结果产生影响**